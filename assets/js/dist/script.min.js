var nja=function(){var t,e={},n="nja-group",a="nja-item",u="nja-active",i="nja-count";return e.init=function(a){t=a;for(var u=document.querySelectorAll("[data-"+n+"]"),i=0;i<u.length;i++)for(var r=e.getItems(u[i]),o=0;o<r.length;o++)e.initCount(r[o]),r[o].addEventListener("click",e.action.bind(null,r[o],u[i]),!1)},e.action=function(t,n){var a=e.isActive(t),u=e.getCount(t);e.addLoading(n),e.reset(n,u),e.toggle(t,n,a,u),e.ajax(t,n,a,u)},e.toggle=function(t,n,a,u){a?(e.removeActive(t),e.resetCount(t),e.setValue(n,0)):(e.addActive(t),e.setCount(t,u),e.setValue(n,e.getValue(t)))},e.reset=function(t,n){for(var a=e.getItems(t),u=0;u<a.length;u++)e.resetCount(a[u],n),e.removeActive(a[u])},e.initCount=function(t){var n=t.querySelector("[data-"+i+"]"),a=parseInt(n.innerHTML),u=e.isActive(t);u&&a--,n.setAttribute("data-"+i,a)},e.getCount=function(t){return t.querySelector("[data-"+i+"]").getAttribute("data-"+i)},e.setCount=function(t,e){t.querySelector("[data-"+i+"]").innerHTML=parseInt(e)+1},e.resetCount=function(t,e){var n=t.querySelector("[data-"+i+"]");n.innerHTML=n.getAttribute("data-"+i)},e.getItems=function(t){return t.querySelectorAll("[data-"+a+"]")},e.addLoading=function(t){t.classList.add("nja-loading")},e.removeLoading=function(t){t.classList.remove("nja-loading")},e.isActive=function(t){return t.classList.contains(u)},e.addActive=function(t){t.classList.add(u)},e.removeActive=function(t){t.classList.remove("nja-active")},e.getValue=function(t){return t.getAttribute("data-nja-item")},e.setValue=function(t,e){t.setAttribute("data-nja-value",e)},e.getGroupValue=function(t){return t.getAttribute("data-nja-value")},e.getId=function(t){return t.getAttribute("data-nja-group")},e.ajax=function(n,a,u,i,r){var o=new XMLHttpRequest,c=e.getGroupValue(a),s=e.getId(a);o.onreadystatechange=function(){if(o.readyState==XMLHttpRequest.DONE&&200==o.status&&(e.removeLoading(a),t&&"function"==typeof t.ajaxCallback)){var r=[];r.count=i,r.active=!u,r.current=e.getValue(n),r.selected=c,r.name=s,t.ajaxCallback(n,a,r)}},o.open("GET","nja/"+c+"/"+s,!0),o.send()},e}();