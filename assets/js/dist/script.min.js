var nja=function(){var t,e={},n="nja-group",a="nja-item",r="nja-active",u="nja-count";return e.init=function(a){t=a;for(var r=document.querySelectorAll("[data-"+n+"]"),u=0;u<r.length;u++)for(var i=e.getItems(r[u]),o=0;o<i.length;o++)e.initCount(i[o]),i[o].addEventListener("click",e.action.bind(null,i[o],r[u]),!1)},e.action=function(t,n){var a=e.isActive(t),r=e.getCount(t);e.addLoading(n),e.reset(n,r),e.toggle(t,n,a,r),e.ajax(t,n,a,r)},e.toggle=function(t,n,a,r){a?(e.removeActive(t),e.resetCount(t),e.setValue(n,0)):(e.addActive(t),e.setCount(t,r),e.setValue(n,e.getValue(t)))},e.reset=function(t,n){for(var a=e.getItems(t),r=0;r<a.length;r++)e.resetCount(a[r],n),e.removeActive(a[r])},e.initCount=function(t){var n=t.querySelector("[data-"+u+"]"),a=parseInt(n.innerHTML),r=e.isActive(t);r&&a--,n.setAttribute("data-"+u,a)},e.getCount=function(t){return t.querySelector("[data-"+u+"]").getAttribute("data-"+u)},e.setCount=function(t,e){t.querySelector("[data-"+u+"]").innerHTML=parseInt(e)+1},e.resetCount=function(t,e){var n=t.querySelector("[data-"+u+"]");n.innerHTML=n.getAttribute("data-"+u)},e.getItems=function(t){return t.querySelectorAll("[data-"+a+"]")},e.addLoading=function(t){t.classList.add("nja-loading")},e.removeLoading=function(t){t.classList.remove("nja-loading")},e.isActive=function(t){return t.classList.contains(r)},e.addActive=function(t){t.classList.add(r)},e.removeActive=function(t){t.classList.remove("nja-active")},e.getValue=function(t){return t.getAttribute("data-nja-item")},e.setValue=function(t,e){t.setAttribute("data-nja-value",e)},e.getGroupValue=function(t){return t.getAttribute("data-nja-value")},e.getId=function(t){return t.getAttribute("data-nja-group")},e.ajax=function(n,a,r,u,i){var o=new XMLHttpRequest,c=e.getGroupValue(a),s=e.getId(a);o.onreadystatechange=function(){if(o.readyState==XMLHttpRequest.DONE&&200==o.status&&(e.removeLoading(a),t&&"function"==typeof t.ajaxCallback)){var i=[];u=r?u:parseInt(u)+1,i.count=parseInt(u),i.active=!r,i.current=parseInt(e.getValue(n)),i.selected=c,i.name=s,t.ajaxCallback(n,a,i)}},o.open("GET",t.root+"/nja/add/"+c+"/"+s,!0),o.send()},e}();