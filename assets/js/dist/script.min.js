var nja=function(){var t,e={},n="nja-group",a="nja-item",i="nja-active",r="nja-count";return e.init=function(a){t=a;for(var i=document.querySelectorAll("[data-"+n+"]"),r=0;r<i.length;r++)for(var o=e.getItems(i[r]),u=0;u<o.length;u++)e.initCount(o[u]),o[u].addEventListener("click",e.action.bind(null,o[u],i[r]),!1)},e.action=function(t,n){var a=e.isActive(t),i=e.getCount(t);e.addLoading(n),e.reset(n,i),e.toggle(t,n,a,i),e.ajax(t,n,a,i)},e.toggle=function(t,n,a,i){a?(e.removeActive(t),e.resetCount(t),e.setValue(n,0)):(e.addActive(t),e.setCount(t,i),e.setValue(n,e.getValue(t)))},e.reset=function(t,n){for(var a=e.getItems(t),i=0;i<a.length;i++)e.resetCount(a[i],n),e.removeActive(a[i])},e.initCount=function(t){var n=t.querySelector("[data-"+r+"]"),a=parseInt(n.innerHTML),i=e.isActive(t);i&&a--,n.setAttribute("data-"+r,a)},e.getCount=function(t){return t.querySelector("[data-"+r+"]").getAttribute("data-"+r)},e.setCount=function(t,e){t.querySelector("[data-"+r+"]").innerHTML=parseInt(e)+1},e.resetCount=function(t,e){var n=t.querySelector("[data-"+r+"]");n.innerHTML=n.getAttribute("data-"+r)},e.getItems=function(t){return t.querySelectorAll("[data-"+a+"]")},e.addLoading=function(t){t.classList.add("nja-loading")},e.removeLoading=function(t){t.classList.remove("nja-loading")},e.isActive=function(t){return t.classList.contains(i)},e.addActive=function(t){t.classList.add(i)},e.removeActive=function(t){t.classList.remove("nja-active")},e.getValue=function(t){return t.getAttribute("data-nja-item")},e.setValue=function(t,e){t.setAttribute("data-nja-value",e)},e.getId=function(t){return t.getAttribute("data-nja-group")},e.ajax=function(n,a,i,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&200==o.status&&(e.removeLoading(a),t&&"function"==typeof t.ajaxCallback&&t.ajaxCallback(i,r,n,a))},o.open("GET","nja/"+a.getAttribute("data-nja-value")+"/"+e.getId(a),!0),o.send()},e}();